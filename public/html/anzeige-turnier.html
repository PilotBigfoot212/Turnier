<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <script src="../../../../node_modules/@smartdesign/lit-input/dist/input-with-externals.js"></script>
  <script src="../../../../node_modules/@smartdesign/list/dist/list-with-externals.js"></script>
  <script src="../../../../node_modules/@smartdesign/header-layout/dist/header-layout-with-externals.js"></script>

  <link rel="stylesheet" href="../../../style/style.css">

  <title></title>
  <div id="declarative-example-root">
    <base href="../../../../node_modules/@smartdesign/icons/toolbar/">
    <sd-toolbar>
      <sd-button icon="refresh.svg" slot="left" onclick="reloadPage()"></sd-button>
      <h2 slot="middle">Allgemein</h2>
      <sd-button icon="cancel.svg" slot="right" onclick="redirectToHomePage()"></sd-button>
    </sd-toolbar>
  </div>
</head>

<body>

<sd-list class="declarative" tabindex="0">
  <div class="sd-content-heading">Kürzlich hinzugefügt</div>
  <!-- Hier werden die Turniere direkt zur sd-list hinzugefügt -->
</sd-list>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    fetchRecentTurniere();
    fetchBeliebteTurniere();
    fetchFreiePlaetze();
  });

  function fetchRecentTurniere() {
    fetch("https://turniersystem.onrender.com/recent-turniere")
            .then(response => response.json())
            .then(turniere => {
              displayTurniere(turniere);
            })
            .catch(error => console.error('Fehler beim Abrufen der Turnierliste:', error));
  }

  function fetchBeliebteTurniere() {
    // Fügen Sie hier den Code hinzu, um beliebige Turniere abzurufen (z.B., die ersten 5)
    // Verwenden Sie einen ähnlichen Ansatz wie bei fetchRecentTurniere
  }

  function fetchFreiePlaetze() {
    // Fügen Sie hier den Code hinzu, um weitere beliebige Turniere abzurufen (z.B., die nächsten 5)
    // Verwenden Sie einen ähnlichen Ansatz wie bei fetchRecentTurniere
  }

  function displayTurniere(turniere) {
    const turnierListe = document.querySelector('sd-list');
    const headingElement = document.createElement('div');
    headingElement.classList.add('sd-content-heading');
    turnierListe.appendChild(headingElement);

    turniere.forEach(turnier => {
      const listItem = document.createElement('sd-list-item');
      listItem.caption = turnier.turnierName;
      listItem.description = `Startdatum: ${turnier.startDatum}, Enddatum: ${turnier.endDatum}, Veranstaltungsort: ${turnier.veranstaltungsort}`;
      turnierListe.appendChild(listItem);
    });
  }
</script>
</body>
</html>